<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"><link rel="stylesheet" href="../../../styles/main.css"><link rel="shortcut icon" href="favicon.ico" type="image/x-icon"><title>Charles-Henri Decultot | Business and Technology Consultant</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
ga('create', 'UA-35025071-2', 'auto');
ga('send', 'pageview');        

</script></head><body class="blue-grey lighten-5 blue-grey-text text-darken-2"> <header><div class="chip"><a href="/"><svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="#000000" d="M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z"></path></svg></a></div></header><main><div class="container"><section id="article" class="row"><div class="col s12"><div class="card"><div class="card-image"><img src="../../../images/semanticAnalysis.jpg"><span class="card-title">Simplify you data analysis with the right tools</span></div><div class="card-content"><div id="blogNav" class="row"><div id="blogHeader"><img id="logo" src="../../../images/CH-round.png" alt="Charles-Henri Decultot" class="circle"><div id="blogInfo"><strong>Charles-Henri Decultot</strong><br><span>September 9, 2016</span></div></div><div id="socialSharing" class="fixed-action-btn waves-effect waves-light horizontal click-to-toggle"><a href="#"><i class="material-icons">share</i></a><ul><li><a href="https:https://www.facebook.com/dialog/share?app_id=145634995501895&amp;display=popup&amp;href=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2F&amp;redirect_uri=https%3A%2F%2Fdevelopers.facebook.com%2Ftools%2Fexplorer"><i><img src="../../../images/facebook-48x48.png" srcset="../../../images/facebook-24x24.png 1x, ../../../images/facebook-48x48.png 2x" alt="Facebook Logo"></i></a></li><li><a href="#"><i><img src="../../../images/Google+-48x48.png" srcset="../../../images/Google+-24x24.png 1x, ../../../images/Google+-48x48.png 2x" alt="Google+ Logo"></i></a></li><li><a href="#"><i><img src="../../../images/Twitter-48x48.png" srcset="../../../images/Twitter-24x24.png 1x, ../../../images/Twitter-48x48.png 2x" alt="Twitter Logo"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=www.chdecultot.com/en/articles/simplify-you-data-analysis-with-the-right-tools/&amp;title=Simplify you data analysis with the right tools&amp;summary=An example of data analysis using Python/Pandas instead of Excel on huge data extract. Spend more time extracting the real value out of your data.&amp;source=Charles-Henri Decultot"><i><img src="../../../images/Linkedin-48x48.png" srcset="../../../images/Linkedin-24x24.png 1x, ../../../images/Linkedin-48x48.png 2x" alt="LinkedIn Logo"></i></a></li></ul></div></div><div class="row"> <div id="blogContent"><article><p> As a first article on this new blog let’s consider a real case.</p>
<p>A few weeks ago a friend was asked by his client to quickly analyze raw data extracted from their customer relationship management tools.<He>receives daily extract files from all over the world in <code>.csv</code> format and needs to check for the presence of offending words within the sales comments regarding their prospects or customers.</p></He><p><strong>Problem</strong></p>
<p>He didn’t have any other tool than Excel to do this analysis efficiently on a daily basis on files with tens of thousands entries each.</p>
<h5 id="finding-the-right-tools">Finding the right tools</h5>
<p>Using Excel as an analysis tool can be sufficient to analyze small files punctually because it is flexible and most people know it better than any other software.</p>
<p>Even if Excel usage can be considerably improved by the creation of macros, it lacks the power to handle huge files without the risk of crashing or preventing you from doing anything on your computer while it calculates.<Therefore>my friend needed to find another way to automate his task.</p></Therefore><p>A great way to do data analysis is to use the <a href="https://www.python.org/">Python</a> language with <a href="http://pandas.pydata.org/">Pandas</a>, an associated library providing tools for structuring and analyzing your data.</p>
<p>If you are familiar with Linux or Mac, you can simply install both Python and Pandas through the command line, but I would recommended to install <a href="https://www.continuum.io/anaconda-overview">Anaconda</a> a complete Data Science platform available for Windows, Mac and Linux.</p>
<p>Anaconda being a complete set of tools, we will start by using <a href="http://jupyter.org/">The Jupyter Notebook</a> a web application that will allow us to create our small analysis program on our computer.</p>
<h5 id="using-the-jupyter-notebook">Using the Jupyter Notebook</h5>
<p>After the installation of Anaconda, launch The Jupyter Notebook.<To>launch it from the terminal on Linux, add the <code>anaconda/bin</code> folder in your path: <code>export PATH=$PATH:&quot;~/anaconda3/bin&quot;</code> (or add it in your <code>~/.bashrc</code> file directly).</p></To><p>Create a new folder on your computer and access it within Jupyter:
<img src="../../../images/20160909-Jupyter.png" alt="alt text" title="My program folder"></p>
<p>Create a new file and choose “Python” as the language.</p>
<p>Before we start creating our program, let’s think about what you are trying to achieve.</p>
<ol>
<li>We receive a <code>.csv</code> file containing a certain number of columns and especially all the “comments” from our sales people.</li>
<li>We have a list of words considered as offending and against our ethi cs and compliance rules.</li>
<li>We need to obtain a report showing any match between the words in the list and the comments from our source file.</li>
</ol>
<p>For testing purposes, you can generate a mock source file with <a href="https://www.mockaroo.com/">Mockaroo</a> or <a href="http://www.csvgenerator.com/">CSVGenerator</a>.<Add>for example 6 columns [‘id, first_name, last_name, email, gender, comments’] and generate a file with 1,000 lines or more (Do some scalability testing before using the program in production). For the comments generate some “Lorem Ipsum” random text.</p></Add><p>So we now have an source file called “MOCK_DATA.csv”.<We>can create a prototype of our program.</p></We><h5 id="writing-a-little-program">Writing a little program</h5>
<p>Start by importing the libraries necessary to handle the csv file and Pandas to play with it.</p>
<pre><code class="lang-python">import csv<import>pandas as pd</import></code></pre>
<p>Add any offending words to be looked for.</p>
<pre><code class="lang-python">words = [&#39;lorem&#39;, &#39;ipsum&#39;, &#39;consequat&#39;]
</code></pre>
<p>You could also replace the above line with:</p>
<pre><code class="lang-python">words = pd.read_csv(&#39;OFFENDING_WORDS.csv&#39;)
</code></pre>
<p>It would allow you to keep a list of all offending words in an external file.</p>
<p>Be careful in this case, the words must be in the first line, not the first column since Pandas will read the first line by default.</p>
<p>Then create a dataframe called ‘sourceFile’ containing our source data and clean the comment column to remove all punctuation and uppercases.</p>
<pre><code class="lang-python">sourceFile = pd.read_csv(&#39;MOCK_DATA.csv&#39;)<sourceFile>[&#39;comments&#39;] = sourceFile.comments.str.lower().replace(&#39;[^A-Za-z0-9]+&#39;,&#39; &#39;, regex=True)</sourceFile><print sourceFile.head(5)="sourceFile.head(5)"></print></code></pre>
<p>Create a dataFrame containing the data to be exported in another ‘.csv’ file for your analysis.</p>
<pre><code class="lang-python">exportFile = pd.DataFrame([])
</code></pre>
<p>Check any match between the comments and the offending words.</p>
<pre><code class="lang-python">for word in words:<sourceFile_words>= sourceFile[sourceFile[&#39;comments&#39;].str.contains(word)]</sourceFile_words></code></pre>
<p>If there is a match, add the columns ‘id’ and ‘comments’ to the report.<Any>other column can be added as well.</p></Any><pre><code class="lang-python">exportFile = exportFile.append(pd.DataFrame( data={&quot;words&quot;: word, &quot;id&quot;: sourceFile_words[&#39;id&#39;], &quot;comments&quot;: sourceFile_words[&#39;comments&#39;]}))
</code></pre>
<p>Export the report in a ‘.csv’ file named ‘analysisResults’.<Then>display the result of the analysis in the console for a quick check.</p></Then><pre><code class="lang-python">exportFile.to_csv(&#39;analysisResults.csv&#39;)<print exportFile="exportFile"></print></code></pre>
<h5 id="running-the-program">Running the program</h5>
<p>There are several ways to run our program and get the expected report.<For>Linux and Mac users the simplest way is to create a new terminal within Jupyter.</For><For>Windows users, since the terminal is <a href="https://github.com/jupyter/notebook/issues/172">not supported</a> execute the program <a href="http://pythoncentral.io/execute-python-script-file-shell/">outside of Jupyter</a></p></For><p>In Jupyter’s terminal, navigate to the folder containing your program - In my case <code>/Desktop/Semantic Analysis Program</code>.<Then>execute the program using the <code>python3</code> command.</p></Then><pre><code class="lang-bash">cd ~/Desktop/Semantic Analysis Program<python3>semanticAnalysis.py</python3></code></pre>
<p>Check the results in the console and verify that a file named ‘analysisResults.csv’ has been correctly created.
<img src="../../../images/20160909-jupyter2.png" alt="alt text" title="Jupyter Terminal"></p>
<p>As you can see, it took only a few seconds to analyze the file and provide a clean report instead a minutes/hours on Excel.<You>can now take more time to do more valuable tasks like to use visualization tools to present the results.</p></You></article></div></div></div></div></div></section></div></main><footer><div id="footer" class="container"><div class="center-align"><a href="https://twitter.com/chdecultot"><svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="#000000" d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z"></path></svg></a><a href="https://github.com/chdecultot" style="margin-left: 5px;"><svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="#000000" d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"></path></svg></a><a href="https://fr.linkedin.com/in/chdecultot" style="margin-left: 5px;"><svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="#000000" d="M21,21H17V14.25C17,13.19 15.81,12.31 14.75,12.31C13.69,12.31 13,13.19 13,14.25V21H9V9H13V11C13.66,9.93 15.36,9.24 16.5,9.24C19,9.24 21,11.28 21,13.75V21M7,21H3V9H7V21M5,3A2,2 0 0,1 7,5A2,2 0 0,1 5,7A2,2 0 0,1 3,5A2,2 0 0,1 5,3Z"></path></svg></a></div><div class="footer-copyright center-align"><p> 
©2016 Charles-Henri Decultot</p></div></div></footer><script type="text/javascript" src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script><script type="text/javascript" src="../../../scripts/malarkey.min.js"></script><script type="text/javascript" src="../../../scripts/main.js"></script></body></html>